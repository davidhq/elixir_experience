machine:
  services:
    - docker
  environment:
    PATH: "$HOME/dependencies/erlang/bin:$HOME/dependencies/elixir/bin:$PATH"
dependencies:
  pre:
    - ./ci_prepare.sh
  cache_directories:
    - ~/dependencies
    - ~/.mix
    - _build
    - deps
  post:
    - mix deps.get
    - mix docker.pull
database:
  override:
    - mix db.reset
test:
  override:
    - mix test
